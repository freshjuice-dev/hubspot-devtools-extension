<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HubSpot DevTools - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <header class="options-header">
      <div class="header-brand">
        <img src="../assets/icons/icon-128.png" alt="FreshJuice" class="header-logo">
        <div class="header-titles">
          <span class="header-brand-name">FreshJuice</span>
          <span class="header-app-name">HubSpot DevTools</span>
        </div>
      </div>
      <p class="subtitle" id="pageSubtitle">Configure your development tools preferences</p>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs-nav">
      <button class="tab-button active" data-tab="settings">Settings</button>
      <button class="tab-button" data-tab="resources">Resources</button>
    </nav>

    <main class="options-content">
      <!-- Settings Tab -->
      <div class="tab-content active" id="tab-settings">

      <!-- General Settings -->
      <section class="settings-section">
        <h2>General Settings</h2>

        <div class="setting-item">
          <div class="setting-info">
            <label for="autoApplyToLinks">Auto-apply to page links</label>
            <p class="setting-description">When enabled, all internal links on the page will be modified to include your active debug parameters. This way, clicking any link keeps your debug session active without manually re-enabling.</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="autoApplyToLinks">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="showBadge">Show badge indicator</label>
            <p class="setting-description">Shows a small number on the extension icon indicating how many debug modes are currently active on the page (e.g., "2" if Debug Mode and Cache Buster are both on).</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="showBadge">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="persistAcrossSessions">Persist across sessions</label>
            <p class="setting-description">Automatically re-apply your saved debug modes when you visit allowed domains. Even after closing the browser, your debug parameters will be added to the URL when you return to these sites.</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="persistAcrossSessions">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </section>

      <!-- Allowed Domains -->
      <section class="settings-section">
        <h2>Allowed Domains</h2>

        <div class="setting-item vertical">
          <div class="setting-info">
            <label for="allowedDomains">Domains for auto-apply</label>
            <p class="setting-description">These are the domains where the extension is active. Domains are automatically added when you enable debug modes via the popup or context menu. You can also manually add or remove domains here.</p>
          </div>
          <textarea id="allowedDomains" placeholder="example.com&#10;mysite.hubspot.com"></textarea>
          <p class="field-hint">One domain per line (e.g., "mysite.com" or "preview.mysite.hubspotcms.com")</p>
        </div>
      </section>

      <!-- Actions -->
      <section class="settings-section actions">
        <button class="button primary" id="saveButton">Save Settings</button>
        <button class="button secondary" id="resetButton">Reset to Defaults</button>
      </section>

      <!-- Status Message -->
      <div class="status-message" id="statusMessage"></div>

      <!-- Keyboard Shortcuts (info only, not a setting) -->
      <section class="settings-section shortcuts-info">
        <h2>Keyboard Shortcuts</h2>
        <p class="setting-description">You can assign custom keyboard shortcuts to quickly toggle debug modes without opening the popup.</p>
        <ul class="shortcuts-list">
          <li><strong>Toggle Debug Mode</strong> — Add/remove hsDebug=true</li>
          <li><strong>Toggle Cache Buster</strong> — Add/remove hsCacheBuster</li>
          <li><strong>Toggle Developer Mode</strong> — Add/remove developerMode=true</li>
        </ul>
        <p class="shortcuts-instructions" id="shortcutsInstructions">
          <!-- Chrome instructions (shown by default, hidden for Firefox) -->
          <span id="chromeInstructions">
            To configure, click <code class="copyable" data-copy="chrome://extensions/shortcuts">chrome://extensions/shortcuts</code> to copy, then paste in your address bar.
          </span>
          <!-- Firefox instructions (hidden by default, shown for Firefox) -->
          <span id="firefoxInstructions" style="display: none;">
            To configure, click <code class="copyable" data-copy="about:addons">about:addons</code> to copy, paste in your address bar.<br>
            Then click ⚙️ → "Manage Extension Shortcuts"
          </span>
        </p>
      </section>

      </div><!-- /tab-settings -->

      <!-- Resources Tab -->
      <div class="tab-content" id="tab-resources">

        <!-- HubSpot Documentation -->
        <section class="settings-section">
          <h2>HubSpot Documentation</h2>
          <div class="resources-links">
            <a href="https://developers.hubspot.com/docs/cms/start-building/introduction/overview?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M128,232a32,32,0,0,1,32-32h72V56H160a32,32,0,0,0-32,32Z" opacity="0.2"/><path d="M128,88a32,32,0,0,1,32-32h72V200H160a32,32,0,0,0-32,32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M24,200H96a32,32,0,0,1,32,32V88A32,32,0,0,0,96,56H24Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="96" x2="200" y2="96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="128" x2="200" y2="128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="160" x2="200" y2="160" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>CMS Developer Docs</strong>
                <small>Official documentation</small>
              </span>
            </a>
            <a href="https://community.hubspot.com/t5/HubSpot-Developer-Support/ct-p/developers?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><circle cx="128" cy="144" r="40" opacity="0.2"/><circle cx="64" cy="88" r="32" opacity="0.2"/><circle cx="192" cy="88" r="32" opacity="0.2"/><path d="M192,120a59.91,59.91,0,0,1,48,24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M16,144a59.91,59.91,0,0,1,48-24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="128" cy="144" r="40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M72,216a65,65,0,0,1,112,0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M161,80a32,32,0,1,1,31,40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M64,120A32,32,0,1,1,95,80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>Developer Community</strong>
                <small>Forums and discussions</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/overview?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><polygon points="192 168 240 128 192 88 64 88 16 128 64 168 192 168" opacity="0.2"/><polyline points="64 88 16 128 64 168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="192 88 240 128 192 168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="40" x2="96" y2="216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL Reference</strong>
                <small>HubSpot markup language guide</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/filters?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M34.1,61.38A8,8,0,0,1,40,48H216a8,8,0,0,1,5.92,13.38L152,136v58.65a8,8,0,0,1-3.56,6.66l-32,21.33A8,8,0,0,1,104,216V136Z" opacity="0.2"/><path d="M34.1,61.38A8,8,0,0,1,40,48H216a8,8,0,0,1,5.92,13.38L152,136v58.65a8,8,0,0,1-3.56,6.66l-32,21.33A8,8,0,0,1,104,216V136Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL Filters</strong>
                <small>Data transformation filters</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/functions?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><polygon points="160 16 144 96 208 120 96 240 112 160 48 136 160 16" opacity="0.2"/><polygon points="160 16 144 96 208 120 96 240 112 160 48 136 160 16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL Functions</strong>
                <small>Built-in template functions</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/variables?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M176,216c64,0,0-88,64-88-64,0,0-88-64-88H80c-64,0,0,88-64,88,64,0,0,88,64,88Z" opacity="0.2"/><path d="M80,40c-64,0,0,88-64,88,64,0,0,88,64,88" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M176,40c64,0,0,88,64,88-64,0,0,88-64,88" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL Variables</strong>
                <small>Store and reuse values</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/if-statements?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><polygon points="192 216 192 136 128 72 64 136 64 216 192 216" opacity="0.2"/><polyline points="96 184 64 216 32 184" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="224 184 192 216 160 184" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="128 24 128 72 64 136 64 216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="128 72 192 136 192 216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL If Statements</strong>
                <small>Conditional logic in templates</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/reference/hubl/for-loops?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M32,128A64,64,0,0,1,96,64H224v64a64,64,0,0,1-64,64H32Z" opacity="0.2"/><polyline points="200 88 224 64 200 40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M32,128A64,64,0,0,1,96,64H224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="56 168 32 192 56 216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M224,128a64,64,0,0,1-64,64H32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubL Loops</strong>
                <small>Iterate over data in templates</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/cms/data/hubdb?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><ellipse cx="128" cy="80" rx="88" ry="48" opacity="0.2"/><ellipse cx="128" cy="80" rx="88" ry="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M40,80v48c0,26.51,39.4,48,88,48s88-21.49,88-48V80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M40,128v48c0,26.51,39.4,48,88,48s88-21.49,88-48V128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>HubDB</strong>
                <small>Relational database for CMS</small>
              </span>
            </a>
            <a href="https://developers.hubspot.com/docs/developer-tooling/local-development/hubspot-cli/reference?utm_source=freshjuice-hubspot-devtools" target="_blank">
              <span class="resource-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><rect x="32" y="48" width="192" height="160" rx="8" opacity="0.2"/><polyline points="80 96 120 128 80 160" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="136" y1="160" x2="176" y2="160" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><rect x="32" y="48" width="192" height="160" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg></span>
              <span class="resource-text">
                <strong>CMS CLI</strong>
                <small>Local development tools</small>
              </span>
            </a>
          </div>
        </section>

        <!-- Juicy Blog -->
        <section class="settings-section">
          <div class="section-header-with-subtitle">
            <h2>Juicy Blog</h2>
            <span class="section-subtitle">Freshly squeezed tips for marketers & developers</span>
          </div>
          <div class="blog-posts" id="blogPosts">
            <div class="blog-loading">Loading posts...</div>
          </div>
        </section>

      </div><!-- /tab-resources -->

    </main>

    <!-- Pre-footer -->
    <div class="prefooter">
      <a href="https://freshjuice.dev?utm_source=freshjuice-hubspot-devtools" target="_blank" class="prefooter-logo">
        <img src="../assets/icons/icon-128.png" alt="FreshJuice" width="64" height="64">
      </a>
      <p class="prefooter-tagline">
        FreshJuice — blending HubSpot modules<br>
        &amp; themes with flavor since 2019
      </p>
    </div>

    <footer class="options-footer">
      <p id="footerTagline"></p>
      <p>
        <a href="https://github.com/freshjuice-dev/hubspot-devtools-extension?utm_source=freshjuice-hubspot-devtools" target="_blank">Source Code</a>
        ·
        <a href="https://github.com/freshjuice-dev/hubspot-devtools-extension/blob/main/PRIVACY.md?utm_source=freshjuice-hubspot-devtools" target="_blank">Privacy Policy</a>
      </p>
    </footer>
  </div>

  <script src="../lib/browser-api.js"></script>
  <script src="../lib/storage.js"></script>
  <script src="options.js"></script>
</body>
</html>
